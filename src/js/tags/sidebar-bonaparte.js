var util = require("bonaparte");

///////////////////////////////////////////////////////////////////////////////
// Public

module.exports = util.registerTag("sidebar", sidebar);

///////////////////////////////////////////////////////////////////////////////
function sidebar(tag){
  updateSize();

///////////////////////////////////////////////////////////////////////////////

  tag.addEventListener("bonaparte.tag.attributeChanged", attributeChangedCallback);
  
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

  function attributeChangedCallback(data){
    if(util.matchAttribute(/size/, data.detail.name)) updateSize();
  }


///////////////////////////////////////////////////////////////////////////////

  function updateSize(data){
    var size = util.getAttribute(tag, "size");
    var style = sidebar === "left" || sidebar==="right" ? "min-width" : "min-height";
    if(size === undefined) 
      tag.firstElementChild.style[style] = "";
    else 
      tag.firstElementChild.style[style] = size;
  }

}

///////////////////////////////////////////////////////////////////////////////