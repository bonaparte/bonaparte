var util = require("../core/utility");
var registerTag = require("../core/tag");

///////////////////////////////////////////////////////////////////////////////
// Public

module.exports = registerTag("sidebar", sidebar);

///////////////////////////////////////////////////////////////////////////////
function sidebar(){
  var tag = this;
  var sidebar = this.firstElementChild;
  updateSize(util.getAttribute(this, "size"));

///////////////////////////////////////////////////////////////////////////////

  this.addEventListener("bonaparte.tag.attributeChanged", attributeChangedCallback);
  
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

  function attributeChangedCallback(data){
    if(util.matchAttribute(/size/, data.name)) {
      updateSize(data.newValue);
    }
  }

///////////////////////////////////////////////////////////////////////////////

  function updateSize(size) {
    if(typeof size === "undefined") return;

    sidebar.style["-webkit-flex-basis"] = size;
    sidebar.style["-ms-flex-preferred-size"] = size;
    sidebar.style["flex-basis"] = size;
  }

///////////////////////////////////////////////////////////////////////////////

}

///////////////////////////////////////////////////////////////////////////////